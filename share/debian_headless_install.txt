#############################################
###### Simple Headless Bitcoin Install ######
#############################################

###### Get upto date ######
sudo apt-get -y update
sudo apt-get -y upgrade

###### Install Git and Download Bitcoin ######
sudo apt-get -y install git-core
git clone https://github.com/satoshiware/bitcoin --depth 1 --branch=r23 ~/bitcoin

###### Install Essential Tools ######
sudo apt-get -y install build-essential libtool autotools-dev automake pkg-config bsdmainutils python3

####### Install the required dependencies #######
sudo apt-get -y install libevent-dev libboost-dev libboost-system-dev libboost-filesystem-dev libboost-test-dev

####### Install SQLite (required for the descriptor wallet) #######
sudo apt -y install libsqlite3-dev

#Options used to compile and link:
#  Enable zmq		sudo apt-get -y install libzmq3-dev 	#ZMQ dependencies (provides ZMQ API)
#  Enable upnp     	sudo apt -y install libminiupnpc-dev	#Enable Universal Plug and Play (UPnP) for dynamic port forwarding
#  Enable natpmp	sudo apt -y install libnatpmp-dev	#Enable the NAT Port Mapping Protocol (NAT-PMP)
#  Enable USDT tracing 	sudo apt -y install systemtap-sdt-dev	#User-Space, Statically Defined Tracing (USDT) dependencies

###### Building ######
cd ~/bitcoin
./autogen.sh
./configure --without-bdb --with-gui=no
	#--help 				#See all the various configuration options
	#--enable-debug		#Enable debugging
	#--enable-gprof   		#Tool for measuring the performance of a program
	#--enable-werror		#Make all warnings into errors
	#--enable-lto           #Link time optimization
make clean
make -j $(($(nproc)+1))
sudo make install

###### Running ######
bitcoind -micro -daemon
